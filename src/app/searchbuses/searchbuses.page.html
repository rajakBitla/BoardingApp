<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Search Bus Tickets</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-list>
    <ion-item>
      <ion-icon name="bus"></ion-icon>
      <ion-input
        type="text"
        [(ngModel)]="origin"
        id="origin-modal"
        label="Origin"
      ></ion-input>
    </ion-item>
    <ion-item>
      <ion-icon name="bus" class="ion-padding"></ion-icon>
      <ion-input
        [(ngModel)]="destination"
        type="text"
        id="destination-modal"
        label="Destination"
      ></ion-input>
    </ion-item>
  </ion-list>

  <ion-modal
    #modal
    trigger="origin-modal"
    [initialBreakpoint]="0.25"
    [breakpoints]="[0, 0.25, 0.5, 0.75]"
  >
    <ng-template>
      <ion-content>
        <ion-searchbar
          placeholder="Search Origin"
          [(ngModel)]="origin"
          (ngModelChange)="filterData()"
          (click)="modal.setCurrentBreakpoint(0.75)"
          showCancelButton="true"
          animated
        ></ion-searchbar>
        <ion-list>
          <ion-item *ngFor="let pair of filteredPairs">
            {{ pair.origin.name }} - {{ pair.destination.name }}
          </ion-item>
        </ion-list>
      </ion-content>
    </ng-template>
  </ion-modal>
  <ion-modal
    #modal
    trigger="destination-modal"
    [(ngModel)]="destination"
    (ngModelChange)="filterData()"
    [initialBreakpoint]="0.25"
    [breakpoints]="[0, 0.25, 0.5, 0.75]"
  >
    <ng-template>
      <ion-content>
        <ion-searchbar
          placeholder="Search Destination"
          (click)="modal.setCurrentBreakpoint(0.75)"
        ></ion-searchbar>
        <ion-list>
          <ion-item *ngFor="let pair of filteredPairs">
            {{ pair.origin.name }} - {{ pair.destination.name }}
          </ion-item>
        </ion-list>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>
